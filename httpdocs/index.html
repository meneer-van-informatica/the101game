<!doctype html>
<html lang="en">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no">
<title>the101game · choose</title>
<!-- BUILD VERSION AUTO -->
<style>
  :root{ --phone-w:min(100vw,420px); --bg:#000; --fg:#eaeaea; --line:#2a2a2a }
  *{box-sizing:border-box} html,body{margin:0;background:var(--bg);color:var(--fg);font:15px/1.45 ui-monospace,consolas,monospace}
  #phone{width:var(--phone-w);min-height:100dvh;margin:0 auto;position:relative;display:flex;flex-direction:column}
  header{padding:12px 12px 4px;border-bottom:1px solid var(--line)}
  h1{margin:0 0 6px 0;font-size:16px}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:8px;padding:10px}
  .lang{border:2px solid #333;border-radius:10px;padding:.65rem .8rem;text-transform:lowercase;font-weight:800;text-align:center;user-select:none}
  .lang.en.selected{border-color:#2ee670;box-shadow:0 0 0 2px #2ee67044 inset; text-transform:uppercase;} /* green = UPPERCASE */
  .lang.nl.selected{border-color:#e62e2e;box-shadow:0 0 0 2px #e62e2e44 inset; text-transform:lowercase;} /* red = lowercase */
  .badge{display:inline-block;margin-left:8px;font-size:.85rem;padding:.1rem .5rem;border:1px solid #333;border-radius:999px;opacity:.9}
  .hint{opacity:.8;margin:2px 12px 8px}
  main{padding:8px 12px 80px}
  .card{border:1px solid var(--line);border-radius:10px;padding:10px}
  .choices{display:grid;gap:8px;margin-top:8px}
  .btn{padding:.65rem .85rem;border:1px solid var(--line);background:#111;color:var(--fg);border-radius:8px;text-align:left}
  .btn[data-go]{cursor:pointer}
  .btn small{opacity:.8}
  /* red dot button bottom center */
  #reddot{position:fixed;left:50%;bottom:calc(env(safe-area-inset-bottom) + 16px);transform:translateX(-50%);
          width:64px;height:64px;border-radius:50%;background:#ff2a2a;
          box-shadow:0 0 0 2px rgba(255,42,42,.25), 0 0 16px rgba(255,42,42,.6);
          display:grid;place-items:center;cursor:pointer;user-select:none;z-index:10}
  #reddot:active{transform:translateX(-50%) scale(.96)}
</style>
<body>
<div id="phone">
  <header>
    <h1>choose language <span id="kukel" class="badge">kukel: +1</span></h1>
    <div class="hint">case 0/1 met toetsenbord of tap · red dot togglet taal</div>
  </header>

  <div class="row">
    <div id="en" class="lang en selected">case 0: ENGLISH</div>
    <div id="nl" class="lang nl">case 1: nederlands</div>
  </div>

  <main>
    <section class="card">
      <b>verhaaltje over de kezen tweeling (case 0 en case 1)</b>
      <p style="margin:.35rem 0 0 0">informatica begon met een tweeling: <b>kees 1</b> (case 0) en <b>kees 2</b> (case 1). kees 1 zegt altijd ja; kees 2 altijd nee. toen kwam <b>kees 0</b> (case 2): misschien.</p>
    </section>

    <section class="card" style="margin-top:10px">
      <b>de vraag is: welke kees ben jij?</b>
      <div class="choices">
        <div class="btn" data-go="/menno"><b>case 0:</b> brugklasser <small>(/menno)</small></div>
        <div class="btn" data-go="/w0lo"><b>case 1:</b> vierdeklasser <small>(/w0lo)</small></div>
        <div class="btn"><b>case 2:</b> vijfdeklasser <small>(soon)</small></div>
        <div class="btn"><b>case 3:</b> zesdeklasser <small>(soon)</small></div>
        <div class="btn"><b>case 4:</b> klasse apart <small>(soon)</small></div>
      </div>
      <div class="hint">typ 0..4 of tik op een optie</div>
    </section>
  </main>
</div>

<div id="reddot" aria-label="toggle language"></div>

<script>
/* ---- KUKEL +1 (local only) ---- */
(function(){
  const key='kukel_total';
  let v = parseInt(localStorage.getItem(key)||'0',10);
  v = (isNaN(v)?0:v) + 1; // +1 op load
  localStorage.setItem(key, String(v));
  const el=document.getElementById('kukel');
  if (el) el.textContent = 'kukel: +' + v;
})();

/* ---- language choose (tiles + red dot) ---- */
let choice = 'en'; // default english (green outline)
const enEl = document.getElementById('en');
const nlEl = document.getElementById('nl');
function applyChoice(lang){
  choice = lang;
  enEl.classList.toggle('selected', lang==='en');
  nlEl.classList.toggle('selected', lang==='nl');
  try{ localStorage.setItem('site_lang', lang); }catch(_){}
  if (lang==='nl'){ localStorage.setItem('w_msg_text','hallo mama'); localStorage.setItem('w_msg_case','1'); }
  else            { localStorage.setItem('w_msg_text','HELLO MAMA'); localStorage.setItem('w_msg_case','0'); }
}
enEl.onclick = ()=>{ applyChoice('en'); chime(); };
nlEl.onclick = ()=>{ applyChoice('nl'); chime(); };
document.getElementById('reddot').addEventListener('click', ()=>{ applyChoice(choice==='en'?'nl':'en'); chime(); });

/* ---- story choices (click + keyboard) ---- */
function go(path){ if(path) location.assign(path); else alert('coming soon'); }
document.querySelectorAll('.btn[data-go]').forEach(b=>b.addEventListener('click', ()=>go(b.dataset.go)));
window.addEventListener('keydown', (e)=>{
  if(e.key==='0'){ go('/menno'); }
  if(e.key==='1'){ go('/w0lo'); }
  if(e.key==='2'){ go(''); }
  if(e.key==='3'){ go(''); }
  if(e.key==='4'){ go(''); }
});

/* ---- audio: chime (toggle) + tiny unlock ---- */
let ac, pre, comp, master, chimex=0;
function initAudio(){ if(ac) return;
  ac=new (window.AudioContext||window.webkitAudioContext)();
  pre=ac.createGain(); pre.gain.value=4.0;
  comp=ac.createDynamicsCompressor(); comp.threshold.value=-24; comp.knee.value=15; comp.ratio.value=20; comp.attack.value=0.002; comp.release.value=0.25;
  master=ac.createGain(); master.gain.value=0.18;
  pre.connect(comp); comp.connect(master); master.connect(ac.destination);
}
async function prime(){ try{initAudio(); if(ac.state==='suspended') await ac.resume(); }catch(_){ } }
function tone(freq, at, dur){
  const o=ac.createOscillator(), g=ac.createGain();
  o.type='sine'; o.frequency.value=freq;
  g.gain.setValueAtTime(0, at);
  g.gain.linearRampToValueAtTime(0.9, at+0.01);
  g.gain.exponentialRampToValueAtTime(0.0001, at+dur);
  o.connect(g); g.connect(pre); o.start(at); o.stop(at+dur+0.02);
}
function chime(){
  prime();
  const t=ac.currentTime;
  if ((chimex^=1)===1){ tone(880, t, 0.15); tone(1320, t+0.02, 0.12); }
  else                { tone(659, t, 0.15); tone(990,  t+0.02, 0.12); }
}
window.addEventListener('pointerdown', ()=>prime(), {once:true,capture:true});
window.addEventListener('keydown', ()=>prime(), {once:true,capture:true});
</script>
</body>
</html>
