<!doctype html>
<html lang="en">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,user-scalable=no">
<title>w0l0</title>
<style>
  :root{--w:min(100vw,420px);--bg:#000;--fg:#fff;--line:#fff}
  *{box-sizing:border-box}
  html,body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.35 ui-monospace,consolas,monospace}
  #phone{width:var(--w);min-height:100dvh;margin:0 auto;display:flex;flex-direction:column;gap:18px;align-items:center;justify-content:center;padding:16px}
  .btn{display:inline-block;padding:.7rem 1rem;border:1px solid var(--line);border-radius:10px;color:#fff;text-decoration:none}
</style>
<body>
<div id="phone">
  <h1 id="msg" style="margin:0">HELLO</h1>
  <a class="btn" href="/index.html">back to km</a>
</div>

<script>
(function(){
  // message by lang
  const L = localStorage.getItem('site_lang')||'en';
  document.documentElement.setAttribute('lang',L);
  const el = document.getElementById('msg');
  if (L==='nl'){ if(el) el.textContent='hallo'; document.title='w0l0 · hallo'; }
  else         { if(el) el.textContent='HELLO'; document.title='w0l0 · HELLO'; }

  // local chain append (worth 1)
  async function sha(s){const b=new TextEncoder().encode(s);const h=await crypto.subtle.digest('SHA-256',b);return [...new Uint8Array(h)].map(x=>x.toString(16).padStart(2,'0')).join('')}
  function load(){try{return JSON.parse(localStorage.getItem('the101game_chain')||'[]')}catch(_){return []}}
  function save(c){localStorage.setItem('the101game_chain',JSON.stringify(c));try{localStorage.setItem('kukel_total',String(c.length))}catch(_){}}  
  async function ensureGenesis(){
    let c=load(); if(c.length) return c;
    const data={owner:'LMW',path:'/genesis',worth:0,ts:Date.now(),note:'start'};
    const prev='0'.repeat(64), hash=await sha(JSON.stringify({i:0,prev,data}));
    c=[{i:0,prev,data,hash}]; save(c); return c;
  }
  (async()=>{
    let c=await ensureGenesis();
    const i=c.length, prev=c[c.length-1].hash, data={owner:'LMW',path:location.pathname,worth:1,lang:L,ts:Date.now()};
    const hash=await sha(JSON.stringify({i,prev,data})); c.push({i,prev,data,hash}); save(c);
  })();
})();
</script>
</body>
</html>
